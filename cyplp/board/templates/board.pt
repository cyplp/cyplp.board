<!DOCTYPE html>
<html >
  <head>
    <title>WiP - ${board.title}</title>
    <link href="${request.static_url('cyplp.board:static/theme.css')}" rel="stylesheet"></link>
    <script src="${request.static_url('cyplp.board:static/board.js')}" />
  </head>

  <body>
    <article>
      <div class="header">
	<h1 id="title-board" data-board="${board['_id']}">${board.title}</h1>
	<a href="${request.route_path('home')}">boards list</a>
      </div>
      <div class="main" id="board" data-board="${board['_id']}" >
	<div tal:repeat="column columns.values()"
	     class="column" dropzone="move"
	     data-column="${column['_id']}">
	  <div>
	    <h2 class="column-title">${column['title']} <span class="column_number">(${len(column.get('items', []))})</span></h2>
	  </div>
	  <tal:if condition="'items' in column">

	  <div tal:repeat="item column['items']"
	       class="item" draggable='true'
	       id='item-${item["_id"]}'
	       dropzone="false">
	    <div>
	      <h3 class="item-title">${item['title']}</h3>
	    </div>
	    <p>${item['content']}</p>

	    <a class="edit" href="${request.route_path('editItem', idBoard=board._id, idItem=item['_id'])}">edit</a>
	  </div>
	  </tal:if>

	  <div class="item">
	    <h3 class="item-title"><a class="addItem" href="#addItem" data-column="${column['_id']}">Add an item</a></h3>
	  </div>
	  <div class="item">
	    <form id="addItem-${column['_id']}"
		  class="addItemForm item-title"
		  method="POST"
		  action='${request.route_path("addItem",
			  idBoard=board._id,
			  idColumn=column["_id"])}'>
	      <input name='title' type="text" />
	      <input class='button' type="submit" value="add" />

	    </form>
	  </div>
	</div>
	<div class='column'>
	  <form method="POST"
		action="${request.route_path('addColumn', id=board._id)}"
		id='addColumn' class='item'>
	    <input name="title" placeholder='column name' type="text"/>
	    <input class='button' type="submit" value="add" />
	  </form>
	  <a class="item" href="#addColumn">Add a column</a>
	</div>
      </div>
      <div class="footer">
	<h4>something here</h4>
      </div>
    </article>
  </body>
</html>
